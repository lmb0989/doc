import{f as K,u as Z,g as L,h as oo,P as Eo,t as eo,i as Bo,j as H,k as S,l as e,m as to,w as j,n as so,R as T,p as lo,q as ro,s as ao,v as io,x as Ao,y as G,z as Q,C as uo,A as no,B as co,D as ho,E as ko,F as mo,G as Co,H as M,I as po,J as D}from"./app-DJCjgs7r.js";const vo=["/","/Book/JavaScript/ArrayBuffer.html","/Book/JavaScript/JavaScript%20%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E7%9B%91%E6%8E%A7%E5%86%85%E5%AD%98.html","/Book/JavaScript/Promise.html","/Book/JavaScript/prototype%E3%80%81__proto__%E4%B8%8Econstructor.html","/Book/JavaScript/%E5%B7%A5%E5%85%B7.html","/Book/Git/GitHub.html","/Book/Git/Gitee.html","/Book/Git/Sourcetree.html","/Book/Git/gitignore%E8%A7%84%E5%88%99.html","/Book/Git/","/Book/Git/%E5%91%BD%E4%BB%A4.html","/Book/Git/%E9%85%8D%E7%BD%AE.html","/Book/Jenkins/Jenkins%E5%88%87%E6%8D%A2node.js%E7%89%88%E6%9C%AC.html","/Book/Linux/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html","/Book/NodeJS/","/Book/NodeJS/nodejs.html","/Book/NodeJS/npm.html","/Book/Python/Miniconda%E5%91%BD%E4%BB%A4.html","/Book/TypeScript/TypeScript%20%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B.html","/Book/TypeScript/Webstorm%E8%BF%90%E8%A1%8Cts.html","/Book/TypeScript/","/Book/TypeScript/t.sd%E6%96%87%E4%BB%B6.html","/Book/TypeScript/%E4%BB%8B%E7%BB%8D.html","/Book/%E5%85%B6%E4%BB%96/WPS%E8%AE%BE%E5%BF%AB%E6%8D%B7%E9%94%AE.html","/Book/%E5%85%B6%E4%BB%96/WebStorm%E4%B8%BB%E9%A2%98.html","/Book/%E5%8A%A0%E5%AF%86%E6%8A%80%E6%9C%AF/","/Book/%E5%8A%A0%E5%AF%86%E6%8A%80%E6%9C%AF/%E4%BB%8B%E7%BB%8D.html","/Book/%E5%B7%A5%E5%85%B7/Postman.html","/Book/%E5%B7%A5%E5%85%B7/","/Book/%E5%B7%A5%E5%85%B7/%E7%BB%88%E7%AB%AF%E9%A2%84%E8%A7%88.html","/Book/%E5%B7%A5%E5%85%B7/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%99%A8.html","/Book/%E6%95%B0%E6%8D%AE%E5%BA%93/","/Book/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/gulp.html","/Book/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/","/Book/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","/Book/%E6%B8%B8%E6%88%8F/","/Book/%E6%B8%B8%E6%88%8F/%E6%B6%88%E7%81%AD%E6%95%8C%E4%BA%BA.html","/Book/%E7%BD%91%E7%BB%9C/TCP.html","/Book/%E7%BD%91%E7%BB%9C/","/Book/%E9%83%A8%E7%BD%B2%E9%9B%86%E6%88%90/","/Book/Jenkins/%E6%8F%92%E4%BB%B6/%E6%8F%92%E4%BB%B6%E5%88%97%E8%A1%A8.html","/Book/NodeJS/NestJS/","/Book/NodeJS/Pinus/","/Book/NodeJS/Pinus/%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%9A%E4%BF%A1.html","/Book/NodeJS/Pinus/%E4%BD%BF%E7%94%A8WebStorm%E8%B0%83%E8%AF%95.html","/Book/NodeJS/Pinus/%E5%8D%8F%E8%AE%AE%E6%A0%BC%E5%BC%8F.html","/Book/NodeJS/Pinus/%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8.html","/Book/NodeJS/Pinus/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7.html","/Book/NodeJS/Pinus/%E6%89%A9%E5%85%85%E6%9C%8D%E5%8A%A1%E5%99%A8.html","/Book/NodeJS/Pinus/%E6%8A%80%E5%B7%A7.html","/Book/NodeJS/Pinus/%E6%9C%AF%E8%AF%AD%E8%A7%A3%E9%87%8A.html","/Book/NodeJS/Pinus/%E6%A1%86%E6%9E%B6%E9%85%8D%E7%BD%AE.html","/Book/NodeJS/Pinus/%E6%A1%86%E6%9E%B6%E9%A9%B1%E5%8A%A8.html","/Book/NodeJS/Pinus/%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B1%BB%E5%9E%8B.html","/Book/NodeJS/Pinus/%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84app.js%E9%85%8D%E7%BD%AE%E5%8F%82%E8%80%83.html","/Book/NodeJS/Pinus/%E7%9B%91%E6%8E%A7.html","/Book/NodeJS/Pinus/%E7%AE%A1%E7%90%86.html","/Book/NodeJS/Pinus/%E7%BB%84%E4%BB%B6.html","/Book/NodeJS/node%E7%89%88%E6%9C%AC%E5%B7%A5%E5%85%B7/fnm.html","/Book/NodeJS/node%E7%89%88%E6%9C%AC%E5%B7%A5%E5%85%B7/nvm.html","/Book/NodeJS/%E5%8C%85/JS%E5%8E%8B%E7%BC%A9.html","/Book/NodeJS/%E5%8C%85/JS%E6%B7%B7%E6%B7%86.html","/Book/NodeJS/%E5%8C%85/TypeScript.html","/Book/NodeJS/%E5%8C%85/concurrently.html","/Book/NodeJS/%E5%8C%85/crypto-js.html","/Book/NodeJS/%E5%8C%85/gulp-tinypng-extended.html","/Book/NodeJS/%E5%8C%85/gulp.html","/Book/NodeJS/%E5%8C%85/","/Book/NodeJS/%E5%8C%85/js-beautify.html","/Book/NodeJS/%E5%8C%85/mkdirp.html","/Book/NodeJS/%E5%8C%85/nodemon.html","/Book/NodeJS/%E5%8C%85/npm%E6%BA%90%E5%88%87%E6%8D%A2%E5%B7%A5%E5%85%B7.html","/Book/NodeJS/%E5%8C%85/swagger-ui-express.html","/Book/NodeJS/%E8%B0%83%E8%AF%95/DevTools%E8%B0%83%E8%AF%95Node.js.html","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/1.%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7.html","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/2.%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B%EF%BC%88Hello%20World%EF%BC%89.html","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/3.%E8%B0%83%E8%AF%95Debug.html","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/4.JSX%E8%84%9A%E6%9C%AC%E6%8C%87%E5%8D%97%20-%20DOM%E7%AF%87.html","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/5.Action%20Manager%E4%BB%8E%E5%A5%BD%E5%A5%87%E5%88%B0%E5%8A%9D%E9%80%80%20-%20%E4%B8%8A%E7%AF%87.html","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/6.Action%20Manager%E4%BB%8E%E5%A5%BD%E5%A5%87%E5%88%B0%E5%8A%9D%E9%80%80%20-%20%E4%B8%AD%E7%AF%87.html","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/7.Action%20Manager%E4%BB%8E%E5%A5%BD%E5%A5%87%E5%88%B0%E5%8A%9D%E9%80%80%20-%20%E4%B8%8B%E7%AF%87.html","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/%E5%BC%95%E7%94%A8.html","/Book/doc/Gitbook/Markdown.html","/Book/doc/Gitbook/Typora.html","/Book/doc/Gitbook/gitbook.html","/Book/doc/Gitbook/","/Book/doc/Gitbook/%E6%8F%92%E4%BB%B6.html","/Book/doc/Tyora/%E6%8F%92%E4%BB%B6.html","/Book/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/","/Book/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/Android%20%E5%8D%87%E7%BA%A7%20Gradle.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/shader.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E5%A6%82%E4%BD%95%E9%87%8D%E7%BB%98%E3%80%8C%E6%B1%9F%E5%8D%97%E7%99%BE%E6%99%AF%E5%9B%BE%E3%80%8D.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E5%AE%9E%E7%8E%B0%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AB%AF%E5%86%99%E6%96%87%E4%BB%B6.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E6%B7%B1%E5%B1%82%E8%A7%A3%E8%AF%BB.html","/Book/%E6%B8%B8%E6%88%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F/","/Book/%E6%B8%B8%E6%88%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%80%82%E9%85%8D.html","/Book/%E6%B8%B8%E6%88%8F/%E6%B8%B8%E6%88%8F%E6%8E%A8%E8%8D%90/","/Book/%E6%B8%B8%E6%88%8F/%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91/","/Book/%E6%B8%B8%E6%88%8F/%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91/%E5%AF%B9%E6%88%98%E5%BC%95%E6%93%8E.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/Bug%E6%94%B6%E9%9B%86/Creator%20%20Android%20%E9%9B%86%E6%88%90%20Bugly.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/shader/CocosCreator%20Shader.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/shader/GLSL%E8%AF%AD%E8%A8%80.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/shader/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E5%B8%A7%E5%90%8C%E6%AD%A5/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99.html","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E5%AE%9A%E5%88%B6%E5%BC%95%E6%93%8E/2.4.x%E7%89%88%E6%9C%AC/%E5%BC%95%E6%93%8E%E5%AE%9A%E5%88%B6%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.html","/404.html","/Book/JavaScript/","/Book/","/Book/Jenkins/","/Book/Linux/","/Book/Python/","/Book/%E5%85%B6%E4%BB%96/","/Book/Jenkins/%E6%8F%92%E4%BB%B6/","/Book/NodeJS/node%E7%89%88%E6%9C%AC%E5%B7%A5%E5%85%B7/","/Book/NodeJS/%E8%B0%83%E8%AF%95/","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/CEP/","/Book/PS%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/","/Book/doc/","/Book/doc/Tyora/","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/Bug%E6%94%B6%E9%9B%86/","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/shader/","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E5%B8%A7%E5%90%8C%E6%AD%A5/","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E5%AE%9A%E5%88%B6%E5%BC%95%E6%93%8E/2.4.x%E7%89%88%E6%9C%AC/","/Book/%E6%B8%B8%E6%88%8F/CocosCreator/%E5%AE%9A%E5%88%B6%E5%BC%95%E6%93%8E/"],Fo="SEARCH_PRO_QUERY_HISTORY",d=M(Fo,[]),yo=()=>{const{queryHistoryCount:t}=D;return{enabled:t>0,queryHistory:d,addQueryHistory:r=>{d.value=Array.from(new Set([r,...d.value.slice(0,t-1)]))},removeQueryHistory:r=>{d.value=[...d.value.slice(0,r),...d.value.slice(r+1)]}}},R=t=>vo[t.id]+("anchor"in t?`#${t.anchor}`:""),So="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:q}=D,m=M(So,[]),Do=()=>({enabled:q>0,resultHistory:m,addResultHistory:s=>{{const r={link:R(s),display:s.display};"header"in s&&(r.header=s.header),m.value=[r,...m.value.slice(0,q-1)]}},removeResultHistory:s=>{m.value=[...m.value.slice(0,s),...m.value.slice(s+1)]}}),Jo=t=>{const s=uo(),r=L(),J=no(),a=H(0),C=S(()=>a.value>0),n=co([]);return ho(()=>{const{search:P,terminate:c}=ko(),p=mo(k=>{const v=k.join(" "),{searchFilter:h=B=>B,splitWord:x,suggestionsFilter:l,...i}=s.value;v?(a.value+=1,P(k.join(" "),r.value,i).then(B=>h(B,v,r.value,J.value)).then(B=>{a.value-=1,n.value=B}).catch(B=>{console.warn(B),a.value-=1,a.value||(n.value=[])})):n.value=[]},D.searchDelay-D.suggestDelay);j([t,r],([k])=>p(k),{immediate:!0}),Co(()=>{c()})}),{isSearching:C,results:n}};var go=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:s}){const r=Z(),J=L(),a=oo(Eo),{addQueryHistory:C,queryHistory:n,removeQueryHistory:P}=yo(),{resultHistory:c,addResultHistory:p,removeResultHistory:k}=Do(),v=eo(t,"queries"),{results:h,isSearching:x}=Jo(v),l=Bo({isQuery:!0,index:0}),i=H(0),B=H(0),w=S(()=>n.value.length>0||c.value.length>0),g=S(()=>h.value.length>0),N=S(()=>h.value[i.value]||null),_=()=>{const{isQuery:o,index:E}=l;E===0?(l.isQuery=!o,l.index=o?c.value.length-1:n.value.length-1):l.index=E-1},$=()=>{const{isQuery:o,index:E}=l;E===(o?n.value.length-1:c.value.length-1)?(l.isQuery=!o,l.index=0):l.index=E+1},O=()=>{i.value=i.value>0?i.value-1:h.value.length-1,B.value=N.value.contents.length-1},I=()=>{i.value=i.value<h.value.length-1?i.value+1:0,B.value=0},W=()=>{B.value<N.value.contents.length-1?B.value+=1:I()},U=()=>{B.value>0?B.value-=1:O()},f=o=>o.map(E=>po(E)?E:e(E[0],E[1])),Y=o=>{if(o.type==="customField"){const E=io[o.index]||"$content",[A,y=""]=Ao(E)?E[J.value].split("$content"):E.split("$content");return o.display.map(u=>e("div",f([A,...u,y])))}return o.display.map(E=>e("div",f(E)))},F=()=>{i.value=0,B.value=0,s("updateQuery",""),s("close")},z=()=>e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},a.value.queryHistory),n.value.map((o,E)=>e("div",{class:["search-pro-result-item",{active:l.isQuery&&l.index===E}],onClick:()=>{s("updateQuery",o)}},[e(G,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},o),e("button",{class:"search-pro-remove-icon",innerHTML:Q,onClick:A=>{A.preventDefault(),A.stopPropagation(),P(E)}})]))])),V=()=>e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},a.value.resultHistory),c.value.map((o,E)=>e(T,{to:o.link,class:["search-pro-result-item",{active:!l.isQuery&&l.index===E}],onClick:()=>{F()}},()=>[e(G,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[o.header?e("div",{class:"content-header"},o.header):null,e("div",o.display.map(A=>f(A)).flat())]),e("button",{class:"search-pro-remove-icon",innerHTML:Q,onClick:A=>{A.preventDefault(),A.stopPropagation(),k(E)}})]))]));return to("keydown",o=>{if(t.isFocusing){if(g.value){if(o.key==="ArrowUp")U();else if(o.key==="ArrowDown")W();else if(o.key==="Enter"){const E=N.value.contents[B.value];C(t.queries.join(" ")),p(E),r.push(R(E)),F()}}else if(o.key==="ArrowUp")_();else if(o.key==="ArrowDown")$();else if(o.key==="Enter"){const{index:E}=l;l.isQuery?(s("updateQuery",n.value[E]),o.preventDefault()):(r.push(c.value[E].link),F())}}}),j([i,B],()=>{var o;(o=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||o.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{class:["search-pro-result-wrapper",{empty:t.queries.length?!g.value:!w.value}],id:"search-pro-results"},t.queries.length?x.value?e(so,{hint:a.value.searching}):g.value?e("ul",{class:"search-pro-result-list"},h.value.map(({title:o,contents:E},A)=>{const y=i.value===A;return e("li",{class:["search-pro-result-list-item",{active:y}]},[e("div",{class:"search-pro-result-title"},o||a.value.defaultTitle),E.map((u,X)=>{const b=y&&B.value===X;return e(T,{to:R(u),class:["search-pro-result-item",{active:b,"aria-selected":b}],onClick:()=>{C(t.queries.join(" ")),p(u),F()}},()=>[u.type==="text"?null:e(u.type==="title"?lo:u.type==="heading"?ro:ao,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?e("div",{class:"content-header"},u.header):null,e("div",Y(u))])])})])})):a.value.emptyResult:w.value?[z(),V()]:a.value.emptyHistory)}});export{go as default};
